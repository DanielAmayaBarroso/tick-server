!function(t,e){if(!e)throw"Backbone is required";e.ListView=e.View.extend({tagName:"div",className:"list-view",itemsContainer:"tbody",renderData:{},collectionFetchData:{},cache:!1,afterFetch:function(){},Collection:null,ItemView:null,constructor:function(t){e.View.apply(this,[t])},initialize:function(t){t=t||{},this.setupCollection(t),this.init&&this.init(t)},setupCollection:function(t){var e=this;this.collection||(this.collection=new this.Collection(t._collection)),t.data||this.collection.fetch({cache:this.cache,data:this.collectionFetchData,success:function(){e.afterFetch.apply(e,arguments),e.trigger("collection-fetch")}}),this.listenTo(this.collection,"add",this.addItem)},addItem:function(t){t.urlRoot||(t.urlRoot=this.collection.url);var e=new this.ItemView({model:t});this.$(this.itemsContainer).append(e.render().el),this.onAddItem&&this.onAddItem.call(this,t,e)},render:function(){return this.beforeRender&&this.beforeRender(),this.$el.html(this.template(this.renderData)),this.onRender&&this.onRender(),this}})}(window,Backbone);
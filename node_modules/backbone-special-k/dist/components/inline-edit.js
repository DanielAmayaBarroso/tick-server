!function(e,n,i){var t={};t.renderInput=function(e){n.modifiers.run(e,"before-render");var l=i["tpl/inline-edit-input-text"]({key:e.key,value:e.plainValue}),a=$(l);return a.find(".form-control").on("keydown",t.setKeypress.bind(e)),e.$el.html(a),setTimeout(function(){a.find(".form-control").select()}),a},t.setKeypress=function(e){e.stopPropagation(),27===e.keyCode&&t.renderBackTD(this),13===e.keyCode&&t.saveInput(this)},t.renderBackTD=function(e){var n=e.plainValue;if(e.tplname){n="";try{n=window.JST[e.tplName](e)}catch(i){console.error(i)}}return e.$el.html(n),n},t.saveInput=function(e){i=e.$input.find("input").val(),e.value=i,e.plainValue=i,e=n.modifiers.run(e);var i=n.modifiers.normalizeValue(e),l=e.key.split(".")[0];e.previusValue!==i&&(e.view.model.set(l,i,{silent:!0}),e.view.model.save(null,{silent:!0}),t.renderBackTD(e))},e.InlineEdit=function(e){e.$el.off("dblclick"),e.$el.on("dblclick","td[data-inline-edit]",function(){var n={};n.$el=$(this),n.tplname=n.$el.data("tpl")||null,n.key=n.$el.data("inline-edit"),n.value=e.model.get(n.key)||"",n.plainValue=$(this).text(),n.view=e,n.$input=t.renderInput(n)})}}(window.Backbone,window.SpecialK,window.SK_JST);
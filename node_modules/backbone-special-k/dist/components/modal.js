!function(e,i){i.ModalView=i.View.extend({tagName:"div",className:"modal fade",attributes:{tabindex:-1,role:"dialog","aria-labelledby":"modal-title","aria-hidden":"true"},Model:null,modalOptions:{keyboard:!0,backdrop:"static",show:!0},changed:!1,events:{"click .btn-cancel":"cancel","click .btn-save":"save"},previusAttributes:null,constructor:function(e){i.View.apply(this,[e])},initialize:function(e){var i=this;return this.model||this.Model?(this.model||(this.model=new this.Model),this.previusAttributes=this.model.toJSON(),this.listenTo(this.model,"change",function(){i.changed=!0}),void(this.init&&this.init(e))):console.log("A model is required")},render:function(){var e=this;this.renderData=this.model.toJSON(),this.beforeRender&&this.beforeRender.apply(this,arguments),this.$el.html(this.template(this.renderData)),this.$el.modal(this.modalOptions),this.$el.on("hidden.bs.modal",function(){e.remove(),e.unbind()}),i.Bindings(this),this.onRender&&this.onRender.apply(this,arguments)},cancel:function(){var e=this;return this.changed?SpecialK.confirm("Han habido cambios, salir sin guardar?",function(i){i&&(e.model.isNew()?e.model.destroy():e.model.set(e.previusAttributes),e.$el.modal("hide"))}):(this.model.isNew()&&this.model.destroy(),void this.$el.modal("hide"))},save:function(){this.model.save(null,{success:function(){},error:function(e){console.error(e)}})}})}(window,Backbone);